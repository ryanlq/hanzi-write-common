<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./hanzi-writer.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        .word-background{
            border: 1px solid #928888;
        }
    </style>
    <title>Document</title>
</head>
<body>
    <section id="main" class="layout"></section>
    <div  id="word_template" class="item_container">
        <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" class="word-background">
            <line x1="0" y1="0" x2="100" y2="100" stroke="#DDD" />
            <line x1="100" y1="0" x2="0" y2="100" stroke="#DDD" />
            <line x1="50" y1="0" x2="50" y2="100" stroke="#DDD" />
            <line x1="0" y1="50" x2="100" y2="50" stroke="#DDD" />
        </svg>
        <div class="cover">
            
        </div>
    </div>
<!--
      <div id="show"> show </div>
      <div id="hide"> show </div>
      <div id="animate"> animate </div>
      <div id="show_outline"> showoutline </div>
      <div id="hide_outline"> hideoutline </div>
      <div id="quiz"> quiz </div>
      <div id="cancel_quiz"> cancle quiz </div>
-->


    <script src="./commonwords.js"></script>
    <script src="./Speaker.js"></script>
    <script src="./tools.js"></script>
    <script>
        let speak = Speaker()
        const main =  document.getElementById('main')
        const wordTemplate = document.getElementById('word_template')
        function create(word){
            let template = wordTemplate.cloneNode(true);
            template.id = ''
            let svg = template.querySelector('svg')
            svg.id = word
            main.appendChild(template)
            let writer = HanziWriter.create(word, word, {
                width: 100,
                height: 100,
                padding: 5,
                strokeAnimationSpeed: 2,
                radicalColor: '#168F16', // green
                // charDataLoader: function(char, onComplete) {
                //     $.getJSON("./data/" + encodeURI(char) + ".json", function(charData) {
                //     onComplete(charData);
                //     });
                // }

            })
            template.writer = writer
            _attachEvent(template)
        }

        function _init(){
            const words = commonwords[0]
            const len = words.length;
            for( let i=0; i<len;i++){
                words[i]!=='\n'&& create(words[i])
            }
        }

        function _attachEvent(el){
            const word = el.querySelector('svg')
            const writer = el.writer;
            const cover =  el.querySelector('.cover')
            cover.addEventListener('click',e=>{
                speak(word.id)
                writer.animateCharacter({
                    showOutline: false,
                    strokeAnimationSpeed: 5, // 5x normal speed
                    delayBetweenStrokes: 10 // milliseconds
                })
            })
        }

        _init()

        // const showbtn = document.querySelector("#show")
        // const hidebtn = document.querySelector("#hide")
        // const animatebtn = document.querySelector("#animate")
        // const show_outlinebtn = document.querySelector("#show_outline")
        // const hide_outlinebtn = document.querySelector("#hide_outline")
        // const quizbtn = document.querySelector("#quiz")
        // const cancel_quizbtn = document.querySelector("#cancel_quiz")
        // showbtn.addEventListener('click',e=>writer.showCharacter())
        // hidebtn.addEventListener('click',e=>writer.hideCharacter())
        // animatebtn.addEventListener('click',e=>writer.loopCharacterAnimation())
        // hide_outlinebtn.addEventListener('click',e=>writer.hideOutline())
        // show_outlinebtn.addEventListener('click',e=>writer.showOutline())
        // quizbtn.addEventListener('click',e=>writer.quiz())
        // cancel_quizbtn.addEventListener('click',e=>writer.cancelQuiz())
        //writer.loopCharacterAnimation();
   
    </script>
</body>
</html>